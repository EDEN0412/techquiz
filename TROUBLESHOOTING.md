# ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

## ğŸ”¥ ç·Šæ€¥æ™‚ã®å¯¾å‡¦æ³•

### Supabaseã‚µãƒ¼ãƒ“ã‚¹ãŒçªç„¶åœæ­¢ã—ãŸå ´åˆ

**ç—‡çŠ¶:** `connection refused` ã‚¨ãƒ©ãƒ¼ã€port 54321 ã¸ã®æ¥ç¶šå¤±æ•—

**å³åº§ã«ã§ãã‚‹å¯¾å‡¦æ³•:**
```bash
# 1. ç¾çŠ¶ç¢ºèª
npm run supabase:status

# 2. è‡ªå‹•å¾©æ—§
npm run supabase:reset

# 3. å®Œå…¨ãƒªã‚»ãƒƒãƒˆï¼ˆä¸Šè¨˜ã§è§£æ±ºã—ãªã„å ´åˆï¼‰
npm run reset:env
```

### èªè¨¼ã‚¨ãƒ©ãƒ¼ï¼ˆ401 Unauthorizedï¼‰ãŒç™ºç”Ÿã—ãŸå ´åˆ

**ç—‡çŠ¶:** ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«401ã‚¨ãƒ©ãƒ¼ã€APIã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦

**å¯¾å‡¦æ³•:**
```bash
# 1. ã‚µãƒ¼ãƒãƒ¼ã®å†èµ·å‹•
Ctrl+C ã§dev.shã‚’åœæ­¢
./dev.sh ã§å†èµ·å‹•

# 2. ç’°å¢ƒãƒã‚§ãƒƒã‚¯
npm run check:health

# 3. å®Œå…¨ãƒªã‚»ãƒƒãƒˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
npm run reset:env
```

---

## ğŸ“‹ å®šæœŸãƒã‚§ãƒƒã‚¯

### é–‹ç™ºé–‹å§‹å‰ï¼ˆæ¨å¥¨ï¼‰

```bash
# ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
npm run check:preflight
```

### é–‹ç™ºä¸­ã«å•é¡Œã‚’æ„Ÿã˜ãŸæ™‚

```bash
# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
npm run check:health
```

---

## ğŸ” å•é¡Œè¨ºæ–­ãƒ•ãƒ­ãƒ¼

### Step 1: åŸºæœ¬çŠ¶æ³ç¢ºèª

```bash
# å…¨ä½“çŠ¶æ³ã®ç¢ºèª
npm run check:health

# SupabaseçŠ¶æ…‹ã®ç¢ºèª
npm run supabase:status

# ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
lsof -i :5173  # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
lsof -i :8000  # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
lsof -i :54321 # Supabase
```

### Step 2: ã‚µãƒ¼ãƒ“ã‚¹åˆ¥ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ğŸŒ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆViteï¼‰ã®å•é¡Œ

**ç—‡çŠ¶:**
- `http://localhost:5173` ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
- ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼
- ç”»é¢ãŒçœŸã£ç™½

**å¯¾å‡¦æ³•:**
```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
rm -rf node_modules/.vite
rm -rf .vite

# ä¾å­˜é–¢ä¿‚å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm ci

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•
./dev.sh
```

#### ğŸ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆDjangoï¼‰ã®å•é¡Œ

**ç—‡çŠ¶:**
- `http://localhost:8000` ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
- 500 Internal Server Error
- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

**å¯¾å‡¦æ³•:**
```bash
cd backend

# ç’°å¢ƒå¤‰æ•°ç¢ºèª
cat .env

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šç¢ºèª
python manage.py dbshell

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ç¢ºèª
python manage.py showmigrations

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
python manage.py migrate

cd ..
```

#### ğŸ—„ï¸ Supabase ã®å•é¡Œ

**ç—‡çŠ¶:**
- `connection refused` ã‚¨ãƒ©ãƒ¼
- Supabase Studio ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

**å¯¾å‡¦æ³•:**
```bash
# Supabaseå®Œå…¨ãƒªã‚»ãƒƒãƒˆ
npx supabase stop
docker system prune -f
npx supabase start

# è¨­å®šç¢ºèª
cat supabase/config.toml

# æ¥ç¶šãƒ†ã‚¹ãƒˆ
psql postgresql://postgres:postgres@localhost:54322/postgres -c "SELECT 1;"
```

---

## ğŸš¨ ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ³•

### 1. ãƒãƒ¼ãƒˆè¡çª

**ã‚¨ãƒ©ãƒ¼:** `EADDRINUSE: address already in use`

**è§£æ±ºæ³•:**
```bash
# ä½¿ç”¨ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèªãƒ»åœæ­¢
lsof -i :<PORT_NUMBER>
kill -9 <PID>

# ã¾ãŸã¯å®Œå…¨ãƒªã‚»ãƒƒãƒˆ
npm run reset:env
```

### 2. ç’°å¢ƒå¤‰æ•°ã®å•é¡Œ

**ç—‡çŠ¶:** è¨­å®šå€¤ãŒåæ˜ ã•ã‚Œãªã„ã€æ¥ç¶šã‚¨ãƒ©ãƒ¼

**è§£æ±ºæ³•:**
```bash
# ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
ls -la .env*
ls -la backend/.env*

# ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ç¢ºèª
cat .env.development
cat backend/.env

# ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚³ãƒ”ãƒ¼ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
cp .env.example .env.development
cp backend/.env.example backend/.env
```

### 3. ä¾å­˜é–¢ä¿‚ã®å•é¡Œ

**ç—‡çŠ¶:** ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çª

**è§£æ±ºæ³•:**
```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
rm -rf node_modules package-lock.json
npm ci

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆPoetryã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆï¼‰
cd backend
poetry install

# ã¾ãŸã¯ pip ã®å ´åˆ
pip install -r requirements.txt
cd ..
```

### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®ä¸æ•´åˆ

**ç—‡çŠ¶:** ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¤±æ•—ã€ãƒ†ãƒ¼ãƒ–ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„

**è§£æ±ºæ³•:**
```bash
cd backend

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ç¢ºèª
python manage.py showmigrations

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚»ãƒƒãƒˆ
python manage.py migrate --fake-initial

# SupabaseåŒæœŸ
python manage.py sync_supabase

cd ..
```

---

## ğŸ”„ å®Œå…¨ãƒªã‚»ãƒƒãƒˆæ‰‹é †

**æ³¨æ„:** ã“ã®æ“ä½œã«ã‚ˆã‚Šå…¨ã¦ã®é–‹ç™ºãƒ‡ãƒ¼ã‚¿ãŒå¤±ã‚ã‚Œã¾ã™

```bash
# 1. ç¢ºèª
npm run check:health

# 2. å®Œå…¨ãƒªã‚»ãƒƒãƒˆå®Ÿè¡Œ
npm run reset:env

# 3. ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
cp .env.example .env.development
cp backend/.env.example backend/.env
# ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦é©åˆ‡ãªå€¤ã‚’è¨­å®š

# 4. é–‹ç™ºç’°å¢ƒèµ·å‹•
./dev.sh

# 5. å‹•ä½œç¢ºèª
npm run check:health
```

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆæƒ…å ±

### ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€

- **Django:** `backend/debug.log`
- **Vite:** ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‡ºåŠ›
- **Supabase:** Docker logs

### æœ‰ç”¨ãªã‚³ãƒãƒ³ãƒ‰

```bash
# Dockeré–¢é€£ã®æƒ…å ±
docker ps -a
docker volume ls
docker system df

# ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª
df -h      # ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡
free -h    # ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ï¼ˆLinuxï¼‰
top        # ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
```

### é–‹ç™ºç’°å¢ƒã®å¾©æ—§æ‰‹é †ï¼ˆç·Šæ€¥æ™‚ï¼‰

1. `npm run reset:env` - å®Œå…¨ãƒªã‚»ãƒƒãƒˆ
2. `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã®å†è¨­å®š
3. `./dev.sh` - é–‹ç™ºç’°å¢ƒèµ·å‹•
4. `npm run check:health` - å‹•ä½œç¢ºèª

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„äº‹é …

- `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’çµ¶å¯¾ã«gitã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã§ãã ã•ã„
- APIã‚­ãƒ¼ã‚„æ©Ÿå¯†æƒ…å ±ã¯é©åˆ‡ã«ç®¡ç†ã—ã¦ãã ã•ã„
- é–‹ç™ºç’°å¢ƒã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æœ¬ç•ªç’°å¢ƒã§ä½¿ç”¨ã—ãªã„ã§ãã ã•ã„

---

## ğŸ“ å•é¡Œãƒ¬ãƒãƒ¼ãƒˆ

å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’å«ã‚ã¦å ±å‘Šã—ã¦ãã ã•ã„ï¼š

1. **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸** ï¼ˆå®Œå…¨ãªã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ï¼‰
2. **å†ç¾æ‰‹é †**
3. **ç’°å¢ƒæƒ…å ±** ï¼ˆOSã€Node.jsã€Pythonã€Dockerã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
4. **ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«** ï¼ˆè©²å½“éƒ¨åˆ†ã®æŠœç²‹ï¼‰
5. **è©¦è¡Œã—ãŸè§£æ±ºç­–**

**æƒ…å ±åé›†ã‚³ãƒãƒ³ãƒ‰:**
```bash
# ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±
node --version
python --version
docker --version
npx supabase --version

# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯çµæœ
npm run check:health > health-report.txt

# ç’°å¢ƒå¤‰æ•°ï¼ˆæ©Ÿå¯†æƒ…å ±ã‚’é™¤ãï¼‰
env | grep -E "(NODE_|PYTHON_|DJANGO_)" 
``` 